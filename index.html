<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Buddy</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
    
    * {
      font-family: 'Kanit', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
    }
    
    .btn-primary {
      background: #667eea;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    
    .btn-primary:hover {
      background: #5568d3;
    }
    
    .btn-secondary {
      background: #48bb78;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    
    .btn-secondary:hover {
      background: #38a169;
    }
    
    .btn-danger {
      background: #f56565;
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: 400;
      transition: background 0.2s;
    }
    
    .btn-danger:hover {
      background: #e53e3e;
    }
    
    .lesson-item {
      background: #f7fafc;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .lesson-item:hover {
      background: #edf2f7;
    }
    
    .post-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
    }
    
    .image-preview {
      max-width: 200px;
      max-height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin: 8px;
    }
    
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto"><!-- Login Screen -->
   <div id="loginScreen" class="gradient-bg h-full flex items-center justify-center p-6">
    <div class="card p-8 max-w-md w-full">
     <h1 id="siteTitle" class="text-3xl font-bold text-center mb-2" style="color: #667eea;">Study Buddy</h1>
     <p id="welcomeMessage" class="text-center text-gray-600 mb-6">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
     <div class="mb-4"><label for="usernameInput" class="block text-gray-700 font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label> <input type="text" id="usernameInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
     </div>
     <div class="mb-6"><label for="passwordInput" class="block text-gray-700 font-medium mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
      <div class="relative"><input type="password" id="passwordInput" class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"> <button type="button" onclick="togglePassword()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-2xl" style="background: none; border: none; cursor: pointer; padding: 0;"> <span id="eyeIcon">üëÅÔ∏è</span> </button>
      </div>
     </div><button onclick="login()" class="btn-primary w-full mb-3">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button> <button onclick="showRegister()" class="btn-secondary w-full">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
     <div id="loginMessage" class="mt-3 text-center"></div>
    </div>
   </div><!-- Grade Selection Screen -->
   <div id="gradeScreen" class="gradient-bg min-h-full p-6" style="display: none;">
    <div class="max-w-4xl mx-auto">
     <div class="flex justify-between items-center mb-6">
      <h2 class="text-3xl font-bold text-white">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</h2>
      <div class="text-white flex items-center gap-4">
       <div class="flex items-center gap-2"><span class="text-xl">üë§</span> <span id="currentUser"></span>
       </div><button onclick="logout()" class="text-sm underline">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
     </div>
     <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
      <div class="card p-6 text-center cursor-pointer" onclick="selectGrade('‡∏°.1')">
       <div class="text-4xl mb-3">
        üìö
       </div>
       <h3 class="text-xl font-semibold">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 1</h3>
      </div>
      <div class="card p-6 text-center cursor-pointer" onclick="selectGrade('‡∏°.2')">
       <div class="text-4xl mb-3">
        üìö
       </div>
       <h3 class="text-xl font-semibold">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 2</h3>
      </div>
      <div class="card p-6 text-center cursor-pointer" onclick="selectGrade('‡∏°.3')">
       <div class="text-4xl mb-3">
        üìö
       </div>
       <h3 class="text-xl font-semibold">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 3</h3>
      </div>
      <div class="card p-6 text-center cursor-pointer" onclick="selectGrade('‡∏°.4')">
       <div class="text-4xl mb-3">
        üìñ
       </div>
       <h3 class="text-xl font-semibold">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 4</h3>
      </div>
      <div class="card p-6 text-center cursor-pointer" onclick="selectGrade('‡∏°.5')">
       <div class="text-4xl mb-3">
        üìñ
       </div>
       <h3 class="text-xl font-semibold">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 5</h3>
      </div>
      <div class="card p-6 text-center cursor-pointer" onclick="selectGrade('‡∏°.6')">
       <div class="text-4xl mb-3">
        üìñ
       </div>
       <h3 class="text-xl font-semibold">‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 6</h3>
      </div>
     </div>
    </div>
   </div><!-- Subject Selection Screen -->
   <div id="subjectScreen" class="gradient-bg min-h-full p-6" style="display: none;">
    <div class="max-w-4xl mx-auto">
     <div class="flex justify-between items-center mb-6">
      <div><button onclick="backToGrades()" class="text-white mb-2">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
       <h2 class="text-3xl font-bold text-white">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤ (<span id="selectedGrade"></span>)</h2>
      </div>
      <div class="text-white flex items-center gap-2"><span class="text-xl">üë§</span> <span id="currentUser2"></span>
      </div>
     </div>
     <div id="subjectList" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>
    </div>
   </div><!-- Lesson Selection Screen -->
   <div id="lessonScreen" class="gradient-bg min-h-full p-6" style="display: none;">
    <div class="max-w-4xl mx-auto">
     <div class="flex justify-between items-center mb-6">
      <div><button onclick="backToSubjects()" class="text-white mb-2">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
       <h2 class="text-3xl font-bold text-white">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
       <p class="text-white"><span id="selectedSubject"></span> (<span id="selectedGrade2"></span>)</p>
      </div>
      <div class="text-white flex items-center gap-2"><span class="text-xl">üë§</span> <span id="currentUser3"></span>
      </div>
     </div>
     <div id="lessonList" class="space-y-3"></div>
    </div>
   </div><!-- Lesson Content Screen -->
   <div id="contentScreen" class="gradient-bg min-h-full p-6" style="display: none;">
    <div class="max-w-5xl mx-auto">
     <div class="flex justify-between items-center mb-6">
      <div><button onclick="backToLessons()" class="text-white mb-2">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
       <h2 id="lessonTitle" class="text-3xl font-bold text-white"></h2>
       <p class="text-white"><span id="selectedSubject2"></span> (<span id="selectedGrade3"></span>)</p>
      </div>
      <div class="text-white flex items-center gap-2"><span class="text-xl">üë§</span> <span id="currentUser4"></span>
      </div>
     </div><!-- Add New Post Form -->
     <div class="card p-6 mb-6">
      <h3 class="text-xl font-semibold mb-4" style="color: #667eea;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>
      <form id="addPostForm" onsubmit="addPost(event)">
       <div class="mb-4"><label for="postContent" class="block text-gray-700 font-medium mb-2">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</label> <textarea id="postContent" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." required></textarea>
       </div>
       <div class="mb-4"><label for="postImages" class="block text-gray-700 font-medium mb-2">‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ)</label> <input type="file" id="postImages" accept="image/*" multiple class="w-full px-4 py-2 border border-gray-300 rounded-lg" onchange="previewImages(event)">
        <div id="imagePreview" class="flex flex-wrap mt-3"></div>
       </div><button type="submit" class="btn-secondary" id="submitBtn">‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</button>
      </form>
     </div><!-- Posts List -->
     <div id="postsList"></div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      site_title: "Study Buddy",
      welcome_message: "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå",
      primary_color: "#667eea",
      secondary_color: "#48bb78",
      danger_color: "#f56565",
      background_color: "#f7fafc",
      text_color: "#2d3748"
    };

    let currentUsername = '';
    let currentGrade = '';
    let currentSubject = '';
    let currentLesson = '';
    let selectedImages = [];
    let isRegistering = false;

    const subjects = {
      '‡∏°.1-3': [
        { name: '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', icon: 'üî¨' },
        { name: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', icon: 'üî¢' },
        { name: '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢', icon: 'üìù' },
        { name: '‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', icon: 'üåç' },
        { name: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤', icon: 'üåè' }
      ],
      '‡∏°.4-6': [
        { name: '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå', icon: '‚öõÔ∏è' },
        { name: '‡πÄ‡∏Ñ‡∏°‡∏µ', icon: 'üß™' },
        { name: '‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤', icon: 'üß¨' },
        { name: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', icon: 'üî¢' },
        { name: '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢', icon: 'üìù' },
        { name: '‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', icon: 'üåç' },
        { name: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤', icon: 'üåè' }
      ]
    };

    const lessons = {
      '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡πÅ‡∏™‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå'
      ],
      '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏Ç‡∏¢‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏™‡∏°‡∏Å‡∏≤‡∏£',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô'
      ],
      '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡πÑ‡∏ó‡∏¢',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡∏´‡∏•‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏π',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠'
      ],
      '‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©': [
        'Chapter 1: Grammar Basics',
        'Chapter 2: Reading Comprehension',
        'Chapter 3: Writing Skills',
        'Chapter 4: Vocabulary Building',
        'Chapter 5: Conversation Practice'
      ],
      '‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏ó‡∏¢',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°'
      ],
      '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÅ‡∏£‡∏á',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏ñ‡∏¥‡∏ï',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏ü‡∏ü‡πâ‡∏≤'
      ],
      '‡πÄ‡∏Ñ‡∏°‡∏µ': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏≠‡∏∞‡∏ï‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏°‡πÄ‡∏•‡∏Å‡∏∏‡∏•',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ò‡∏≤‡∏ï‡∏∏',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡∏û‡∏±‡∏ô‡∏ò‡∏∞‡πÄ‡∏Ñ‡∏°‡∏µ',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢'
      ],
      '‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤': [
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡∏∑‡πà‡∏≠',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏Å‡∏£‡∏£‡∏°',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏¥‡πÄ‡∏ß‡∏®',
        '‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û'
      ]
    };

    // Local Storage Functions
    function getUsers() {
      const users = localStorage.getItem('studyBuddyUsers');
      return users ? JSON.parse(users) : [];
    }

    function saveUsers(users) {
      localStorage.setItem('studyBuddyUsers', JSON.stringify(users));
    }

    function getPosts() {
      const posts = localStorage.getItem('studyBuddyPosts');
      return posts ? JSON.parse(posts) : [];
    }

    function savePosts(posts) {
      localStorage.setItem('studyBuddyPosts', JSON.stringify(posts));
    }

    async function initializeApp() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const siteTitle = config.site_title || defaultConfig.site_title;
            const welcomeMessage = config.welcome_message || defaultConfig.welcome_message;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const dangerColor = config.danger_color || defaultConfig.danger_color;
            
            document.getElementById('siteTitle').textContent = siteTitle;
            document.getElementById('welcomeMessage').textContent = welcomeMessage;
            
            document.getElementById('siteTitle').style.color = primaryColor;
            
            const primaryButtons = document.querySelectorAll('.btn-primary');
            primaryButtons.forEach(btn => {
              btn.style.backgroundColor = primaryColor;
            });
            
            const secondaryButtons = document.querySelectorAll('.btn-secondary');
            secondaryButtons.forEach(btn => {
              btn.style.backgroundColor = secondaryColor;
            });
            
            const dangerButtons = document.querySelectorAll('.btn-danger');
            dangerButtons.forEach(btn => {
              btn.style.backgroundColor = dangerColor;
            });
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.primary_color || defaultConfig.primary_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ primary_color: value });
                  }
                }
              },
              {
                get: () => config.secondary_color || defaultConfig.secondary_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ secondary_color: value });
                  }
                }
              },
              {
                get: () => config.danger_color || defaultConfig.danger_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ danger_color: value });
                  }
                }
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['site_title', config.site_title || defaultConfig.site_title],
            ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
          ])
        });
      }
    }

    async function login() {
      const username = document.getElementById('usernameInput').value.trim();
      const password = document.getElementById('passwordInput').value.trim();
      
      if (!username) {
        showLoginMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', 'error');
        return;
      }
      
      if (!password) {
        showLoginMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô', 'error');
        return;
      }
      
      const users = getUsers();
      const user = users.find(u => u.username === username && u.password === password);
      
      if (!user) {
        showLoginMessage('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
        return;
      }
      
      currentUsername = username;
      document.getElementById('usernameInput').value = '';
      document.getElementById('passwordInput').value = '';
      showScreen('gradeScreen');
      updateUserDisplay();
    }
    
    function showRegister() {
      isRegistering = true;
      const loginBtn = document.querySelector('button[onclick="login()"]');
      const registerBtn = document.querySelector('button[onclick="showRegister()"]');
      
      loginBtn.textContent = '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
      loginBtn.setAttribute('onclick', 'register()');
      registerBtn.textContent = '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å';
      registerBtn.setAttribute('onclick', 'cancelRegister()');
      
      showLoginMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å', 'info');
    }
    
    function cancelRegister() {
      isRegistering = false;
      const loginBtn = document.querySelector('button[onclick="register()"]');
      const registerBtn = document.querySelector('button[onclick="cancelRegister()"]');
      
      loginBtn.textContent = '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
      loginBtn.setAttribute('onclick', 'login()');
      registerBtn.textContent = '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
      registerBtn.setAttribute('onclick', 'showRegister()');
      
      document.getElementById('usernameInput').value = '';
      document.getElementById('passwordInput').value = '';
      document.getElementById('loginMessage').innerHTML = '';
    }
    
    async function register() {
      const username = document.getElementById('usernameInput').value.trim();
      const password = document.getElementById('passwordInput').value.trim();
      
      if (!username) {
        showLoginMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', 'error');
        return;
      }
      
      if (!password) {
        showLoginMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô', 'error');
        return;
      }
      
      if (password.length < 4) {
        showLoginMessage('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£', 'error');
        return;
      }
      
      const users = getUsers();
      const existingUser = users.find(u => u.username === username);
      if (existingUser) {
        showLoginMessage('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß', 'error');
        return;
      }
      
      const newUser = {
        id: Date.now().toString(),
        username: username,
        password: password,
        created_at: new Date().toISOString()
      };
      
      users.push(newUser);
      saveUsers(users);
      
      showLoginMessage('‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö', 'success');
      setTimeout(() => {
        cancelRegister();
      }, 2000);
    }
    
    function showLoginMessage(message, type) {
      const msgDiv = document.getElementById('loginMessage');
      msgDiv.textContent = message;
      msgDiv.className = 'mt-3 text-center ' + (type === 'error' ? 'text-red-600' : type === 'success' ? 'text-green-600' : 'text-blue-600');
    }
    
    function togglePassword() {
      const passwordInput = document.getElementById('passwordInput');
      const eyeIcon = document.getElementById('eyeIcon');
      
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.textContent = 'üëÅÔ∏è‚Äçüó®Ô∏è';
      } else {
        passwordInput.type = 'password';
        eyeIcon.textContent = 'üëÅÔ∏è';
      }
    }

    function logout() {
      currentUsername = '';
      currentGrade = '';
      currentSubject = '';
      currentLesson = '';
      document.getElementById('usernameInput').value = '';
      showScreen('loginScreen');
    }

    function showScreen(screenId) {
      const screens = ['loginScreen', 'gradeScreen', 'subjectScreen', 'lessonScreen', 'contentScreen'];
      screens.forEach(id => {
        document.getElementById(id).style.display = 'none';
      });
      document.getElementById(screenId).style.display = 'block';
    }

    function updateUserDisplay() {
      document.getElementById('currentUser').textContent = currentUsername;
      document.getElementById('currentUser2').textContent = currentUsername;
      document.getElementById('currentUser3').textContent = currentUsername;
      document.getElementById('currentUser4').textContent = currentUsername;
    }

    function selectGrade(grade) {
      currentGrade = grade;
      document.getElementById('selectedGrade').textContent = grade;
      document.getElementById('selectedGrade2').textContent = grade;
      document.getElementById('selectedGrade3').textContent = grade;
      
      const gradeNum = parseInt(grade.replace('‡∏°.', ''));
      const subjectKey = gradeNum <= 3 ? '‡∏°.1-3' : '‡∏°.4-6';
      const subjectList = subjects[subjectKey];
      
      const container = document.getElementById('subjectList');
      container.innerHTML = '';
      
      subjectList.forEach(subject => {
        const div = document.createElement('div');
        div.className = 'card p-6 text-center cursor-pointer';
        div.onclick = () => selectSubject(subject.name);
        div.innerHTML = `
          <div class="text-4xl mb-3">${subject.icon}</div>
          <h3 class="text-xl font-semibold">${subject.name}</h3>
        `;
        container.appendChild(div);
      });
      
      showScreen('subjectScreen');
    }

    function selectSubject(subject) {
      currentSubject = subject;
      document.getElementById('selectedSubject').textContent = subject;
      document.getElementById('selectedSubject2').textContent = subject;
      
      const lessonList = lessons[subject] || [];
      const container = document.getElementById('lessonList');
      container.innerHTML = '';
      
      lessonList.forEach(lesson => {
        const div = document.createElement('div');
        div.className = 'lesson-item';
        div.onclick = () => selectLesson(lesson);
        div.innerHTML = `<h3 class="text-lg font-medium">${lesson}</h3>`;
        container.appendChild(div);
      });
      
      showScreen('lessonScreen');
    }

    function selectLesson(lesson) {
      currentLesson = lesson;
      document.getElementById('lessonTitle').textContent = lesson;
      renderPosts();
      showScreen('contentScreen');
    }

    function backToGrades() {
      showScreen('gradeScreen');
    }

    function backToSubjects() {
      showScreen('subjectScreen');
    }

    function backToLessons() {
      document.getElementById('postContent').value = '';
      document.getElementById('postImages').value = '';
      document.getElementById('imagePreview').innerHTML = '';
      selectedImages = [];
      showScreen('lessonScreen');
    }

    function previewImages(event) {
      const files = event.target.files;
      const preview = document.getElementById('imagePreview');
      preview.innerHTML = '';
      selectedImages = [];
      
      for (let file of files) {
        const reader = new FileReader();
        reader.onload = (e) => {
          selectedImages.push(e.target.result);
          const img = document.createElement('img');
          img.src = e.target.result;
          img.className = 'image-preview';
          preview.appendChild(img);
        };
        reader.readAsDataURL(file);
      }
    }

    async function addPost(event) {
      event.preventDefault();
      
      const content = document.getElementById('postContent').value.trim();
      if (!content) {
        showInlineMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤', 'postContent');
        return;
      }
      
      const posts = getPosts();
      const post = {
        id: Date.now().toString(),
        lesson_id: `${currentGrade}-${currentSubject}-${currentLesson}`,
        author: currentUsername,
        content: content,
        images: JSON.stringify(selectedImages),
        created_at: new Date().toISOString()
      };
      
      posts.push(post);
      savePosts(posts);
      
      document.getElementById('postContent').value = '';
      document.getElementById('postImages').value = '';
      document.getElementById('imagePreview').innerHTML = '';
      selectedImages = [];
      
      renderPosts();
    }

    function renderPosts() {
      const container = document.getElementById('postsList');
      const lessonId = `${currentGrade}-${currentSubject}-${currentLesson}`;
      const allPosts = getPosts();
      const lessonPosts = allPosts.filter(post => post.lesson_id === lessonId);
      
      if (lessonPosts.length === 0) {
        container.innerHTML = '<div class="card p-6 text-center text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏µ‡πâ</div>';
        return;
      }
      
      container.innerHTML = '';
      
      lessonPosts.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)).forEach(post => {
        const div = document.createElement('div');
        div.className = 'post-card';
        div.id = `post-${post.id}`;
        
        const images = JSON.parse(post.images || '[]');
        const isAuthor = post.author === currentUsername;
        
        div.innerHTML = `
          <div class="flex justify-between items-start mb-3">
            <div>
              <h4 class="font-semibold text-lg flex items-center gap-2" style="color: ${defaultConfig.text_color};">
                <span>üë§</span>
                <span>${post.author}</span>
              </h4>
              <p class="text-sm text-gray-500">${new Date(post.created_at).toLocaleString('th-TH')}</p>
            </div>
            ${isAuthor ? `
              <div>
                <button onclick="editPost('${post.id}')" class="text-blue-600 mr-2">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                <button onclick="deletePost('${post.id}')" class="text-red-600">üóëÔ∏è ‡∏•‡∏ö</button>
              </div>
            ` : ''}
          </div>
          <div id="content-${post.id}">
            <p class="text-gray-800 mb-3 whitespace-pre-wrap">${post.content}</p>
            ${images.length > 0 ? `
              <div class="flex flex-wrap">
                ${images.map(img => `<img src="${img}" class="image-preview" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">`).join('')}
              </div>
            ` : ''}
          </div>
        `;
        
        container.appendChild(div);
      });
    }

    function editPost(postId) {
      const posts = getPosts();
      const post = posts.find(p => p.id === postId);
      if (!post) return;
      
      const postDiv = document.getElementById(`post-${postId}`);
      const contentDiv = document.getElementById(`content-${postId}`);
      const images = JSON.parse(post.images || '[]');
      
      contentDiv.innerHTML = `
        <textarea id="edit-content-${postId}" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-3">${post.content}</textarea>
        <div class="mb-3">
          <label class="block text-gray-700 font-medium mb-2">‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ)</label>
          <input type="file" id="edit-images-${postId}" accept="image/*" multiple class="w-full px-4 py-2 border border-gray-300 rounded-lg" onchange="previewEditImages('${postId}', event)">
          <div id="edit-preview-${postId}" class="flex flex-wrap mt-3">
            ${images.map(img => `<img src="${img}" class="image-preview" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">`).join('')}
          </div>
        </div>
        <button onclick="saveEdit('${postId}')" class="btn-secondary mr-2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button onclick="cancelEdit('${postId}')" class="btn-danger">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      `;
      
      postDiv.dataset.editing = 'true';
      postDiv.dataset.originalImages = post.images;
    }

    let editImages = {};

    function previewEditImages(postId, event) {
      const files = event.target.files;
      const preview = document.getElementById(`edit-preview-${postId}`);
      preview.innerHTML = '';
      editImages[postId] = [];
      
      for (let file of files) {
        const reader = new FileReader();
        reader.onload = (e) => {
          editImages[postId].push(e.target.result);
          const img = document.createElement('img');
          img.src = e.target.result;
          img.className = 'image-preview';
          preview.appendChild(img);
        };
        reader.readAsDataURL(file);
      }
    }

    async function saveEdit(postId) {
      const posts = getPosts();
      const postIndex = posts.findIndex(p => p.id === postId);
      if (postIndex === -1) return;
      
      const newContent = document.getElementById(`edit-content-${postId}`).value.trim();
      if (!newContent) {
        showInlineMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤', `edit-content-${postId}`);
        return;
      }
      
      posts[postIndex].content = newContent;
      
      if (editImages[postId] && editImages[postId].length > 0) {
        posts[postIndex].images = JSON.stringify(editImages[postId]);
      }
      
      savePosts(posts);
      delete editImages[postId];
      renderPosts();
    }

    function cancelEdit(postId) {
      delete editImages[postId];
      renderPosts();
    }

    async function deletePost(postId) {
      const postDiv = document.getElementById(`post-${postId}`);
      const deleteBtn = postDiv.querySelector(`button[onclick="deletePost('${postId}')"]`);
      
      if (deleteBtn.textContent === 'üóëÔ∏è ‡∏•‡∏ö') {
        deleteBtn.textContent = '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö?';
        deleteBtn.style.backgroundColor = '#f56565';
        deleteBtn.style.color = 'white';
        deleteBtn.style.padding = '4px 8px';
        deleteBtn.style.borderRadius = '4px';
        
        setTimeout(() => {
          if (deleteBtn) {
            deleteBtn.textContent = 'üóëÔ∏è ‡∏•‡∏ö';
            deleteBtn.style.backgroundColor = '';
            deleteBtn.style.color = '';
            deleteBtn.style.padding = '';
            deleteBtn.style.borderRadius = '';
          }
        }, 3000);
        return;
      }
      
      const posts = getPosts();
      const filteredPosts = posts.filter(p => p.id !== postId);
      savePosts(filteredPosts);
      renderPosts();
    }

    function showInlineMessage(message, elementId) {
      const element = document.getElementById(elementId);
      const existingMsg = element.parentElement.querySelector('.inline-message');
      if (existingMsg) existingMsg.remove();
      
      const msgDiv = document.createElement('div');
      msgDiv.className = 'inline-message text-red-600 text-sm mt-2';
      msgDiv.textContent = message;
      element.parentElement.appendChild(msgDiv);
      
      setTimeout(() => msgDiv.remove(), 3000);
    }

    initializeApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9abb9cbb303914b5',t:'MTc2NTM1Nzg1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
